<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Craft: Clean & Logical</title>
    <style>
        :root {
            --bg-deep: #020617;
            --panel-bg: rgba(18, 20, 28, 0.96);
            --border-glow: rgba(56, 189, 248, 0.2);
            --grad-idea: linear-gradient(135deg, #a855f7, #d946ef);
            --grad-master: linear-gradient(135deg, #0ea5e9, #2563eb);
            --grad-part: linear-gradient(135deg, #f97316, #ea580c);
            --shadow-card: 0 20px 60px rgba(0,0,0,0.9), inset 0 1px 0 rgba(255,255,255,0.1);
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: #000;
            background-image: radial-gradient(circle at 50% -20%, #1e1b4b, #000 70%);
            color: #fff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
        }

        .app-container {
            width: 100%;
            max-width: 850px;
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding-bottom: 80px;
        }

        header { text-align: center; }
        h1 {
            font-size: 2.5rem; margin: 0;
            background: linear-gradient(to right, #7dd3fc, #c084fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            filter: drop-shadow(0 0 15px rgba(34, 211, 238, 0.3));
        }
        .dev-badge {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: #4ade80; padding: 5px 15px; border-radius: 20px;
            font-size: 0.7rem; font-weight: bold; display: inline-block; margin-top: 10px;
        }

        .glass-panel {
            background: var(--panel-bg);
            border: 1px solid var(--border-glow);
            border-radius: 24px;
            padding: 25px;
            box-shadow: var(--shadow-card);
            position: relative;
        }

        .input-group { display: flex; flex-direction: column; gap: 12px; }
        
        .label-row {
            display: flex; justify-content: space-between; align-items: center;
            font-size: 0.8rem; font-weight: 800; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px;
        }

        textarea {
            width: 100%;
            background: #0b0b0d;
            border: none;
            border-radius: 18px;
            padding: 20px;
            color: #fff;
            font-size: 1rem;
            font-family: 'Courier New', monospace;
            resize: vertical;
            outline: none;
            box-sizing: border-box;
            box-shadow: inset 3px 3px 10px rgba(0,0,0,0.6), inset -1px -1px 0 rgba(255,255,255,0.1);
            min-height: 100px;
            border-bottom: 2px solid transparent;
            transition: 0.3s;
        }
        textarea:focus { border-bottom-color: #3b82f6; background: #101012; }

        .btn-3d {
            border: none; color: white; font-weight: 900; text-transform: uppercase;
            cursor: pointer; border-radius: 50px; display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: all 0.15s; letter-spacing: 1px; position: relative; top: 0;
        }
        .btn-3d:active { top: 4px; transform: scale(0.98); }
        .btn-3d:disabled { opacity: 0.6; cursor: wait; filter: grayscale(1); top: 2px; }

        .btn-magic {
            background: var(--grad-idea); padding: 8px 18px; font-size: 0.7rem;
            box-shadow: 0 5px 0 #9333ea;
        }
        
        .btn-master {
            width: 100%; background: var(--grad-master); padding: 18px; font-size: 1.1rem; margin-top: 15px;
            box-shadow: 0 8px 0 #1e3a8a, 0 15px 30px rgba(30, 58, 138, 0.4);
        }

        .btn-parts {
            width: 100%; background: var(--grad-part); padding: 16px; font-size: 1rem; margin-top: 15px;
            box-shadow: 0 8px 0 #b45309, 0 15px 30px rgba(245, 158, 11, 0.3);
        }

        #part-section {
            display: none; margin-top: 25px; border: 2px dashed rgba(255,255,255,0.1);
            animation: slideUp 0.5s ease;
        }

        #results-feed { display: flex; flex-direction: column; gap: 30px; margin-top: 20px; }

        .result-card {
            background: #121214; border-radius: 20px; border: 1px solid #333; overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6); animation: popIn 0.5s ease;
        }

        .card-header {
            background: linear-gradient(90deg, rgba(255,255,255,0.05), transparent);
            padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #222;
        }

        .tag {
            font-size: 0.7rem; font-weight: 800; padding: 5px 12px; border-radius: 50px; text-transform: uppercase;
        }
        .tag-master { background: linear-gradient(135deg, #10b981, #059669); color: white; }
        .tag-part { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }

        .content-area { padding: 20px; display: flex; flex-direction: column; gap: 15px; }

        .prompt-block {
            background: #08080a; padding: 15px; border-radius: 12px; border: 1px solid #222;
        }
        
        .prompt-label {
            font-size: 0.65rem; color: #7dd3fc; font-weight: bold; margin-bottom: 5px; display: block; text-transform: uppercase;
        }
        
        .prompt-text {
            font-family: 'Courier New', monospace; font-size: 0.9rem; color: #e2e8f0; line-height: 1.6;
        }

        .video-label { color: #f472b6; }

        .btn-copy {
            background: #222; border: 1px solid #444; color: white; padding: 5px 12px; border-radius: 50px; cursor: pointer; font-size: 0.65rem; font-weight: bold; transition: 0.2s;
        }
        .btn-copy:hover { background: #fff; color: #000; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .spinner { width: 16px; height: 16px; border: 2px solid #fff; border-top-color: transparent; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .icon { width: 16px; height: 16px; fill: currentColor; }

    </style>
</head>
<body>

    <div class="app-container">
        <header>
            <h1>Master Craft Pro</h1>
            <div class="subtitle">CLEAN TEXT & LOGICAL ANATOMY FIX</div>
            <div class="dev-badge">Developed by OLIULLAH SHIKDER JEWEL</div>
        </header>

        <div class="glass-panel">
            <div class="input-group">
                <div class="label-row">
                    <span>üí° CONCEPT (AUTO TRANSLATE)</span>
                    <button class="btn-3d btn-magic" onclick="fetchIdea()" id="btn-idea">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M7.5 5.6L10 5l.5-2.5 1.5 2 2.5.5-2 1.5L12 9l-2-1.5L7.5 5.6zM19.5 13l-2.5-.5-1.5-2-.5 2.5-2.5.5 2 1.5L14 17l2-1.5 2.5.5.5-2.5z"/></svg>
                        Surprise Me
                    </button>
                </div>
                <textarea id="main-input" placeholder="Type here (e.g. ‡¶®‡¶æ‡¶∞‡¶ø‡¶ï‡ßá‡¶≤ ‡¶™‡¶æ‡¶§‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶∂‡¶æ‡¶π‡¶∞‡ßÅ‡¶ñ ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶ú‡¶≤)..."></textarea>
            </div>
            
            <button class="btn-3d btn-master" onclick="generateMaster()" id="btn-master">
                <svg class="icon" viewBox="0 0 24 24"><path d="M2 20h20v2H2v-2zm2-3h2v2H4v-2zm0-5h2v4H4v-4zm0-5h2v4H4V7zm0-5h2v4H4V2zm4 0h14v16H8V2zm2 2v12h10V4H10z"/></svg>
                ASSEMBLE MASTERPIECE
            </button>
        </div>

        <div class="glass-panel" id="part-section">
            <div class="input-group">
                <div class="label-row" style="color: #f59e0b;">
                    <span>üîß MANUAL UNWRAPPING (Use Commas, Last item is Assembly)</span>
                </div>
                <textarea id="parts-input" placeholder="e.g. Modi's Head, Biden's Head, Attaching Modi's Head (‡¶®‡¶∞‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞ ‡¶Æ‡ßã‡¶¶‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶•‡¶æ, ‡¶ú‡ßã ‡¶¨‡¶æ‡¶á‡¶°‡ßá‡¶®‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶•‡¶æ, ‡¶®‡¶∞‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞ ‡¶Æ‡ßã‡¶¶‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶•‡¶æ ‡¶≤‡¶æ‡¶ó‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶®)"></textarea>
            </div>
            
            <button class="btn-3d btn-parts" onclick="processParts()" id="btn-parts">
                <svg class="icon" viewBox="0 0 24 24"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/></svg>
                GENERATE ALL PARTS & VIDEO
            </button>
        </div>

        <div id="results-feed"></div>
    </div>

    <script>
        // GLOBAL STATE
        let currentMasterPrompt = "";
        
        // --- 1. STRICT MATERIALS (6 TYPES - FIXED) ---
        const specificMaterials = [
            "Green Bamboo Strips Fine Weaving (‡¶ï‡¶æ‡¶Å‡¶ö‡¶æ ‡¶¨‡¶æ‡¶Å‡¶∂‡ßá‡¶∞ ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶´‡¶æ‡¶≤‡¶ø‡¶∞ ‡¶¨‡ßÅ‡¶®‡¶®)",
            "Vibrant Wildflowers & Vines (‡¶®‡¶æ‡¶®‡¶æ‡¶® ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶ì‡¶Ø‡¶º‡¶æ‡¶á‡¶≤‡ßç‡¶° ‡¶´‡ßç‡¶≤‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶¨‡¶æ ‡¶≤‡¶§‡¶æ ‡¶™‡¶æ‡¶§‡¶æ)",
            "Green Coconut Leaf Weaving (‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶®‡¶æ‡¶∞‡¶ï‡ßá‡¶≤ ‡¶™‡¶æ‡¶§‡¶æ‡¶∞ ‡¶¨‡ßÅ‡¶®‡¶®)",
            "Palm Leaf Fine Weaving (‡¶™‡¶æ‡¶Æ ‡¶ó‡¶æ‡¶õ‡ßá‡¶∞ ‡¶™‡¶æ‡¶§‡¶æ‡¶∞ ‡¶¨‡ßÅ‡¶®‡¶®)",
            "Colorful Sea Shells & Snails (‡¶∏‡¶æ‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞‡¶ø‡¶ï ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞‡¶´‡ßÅ‡¶≤ ‡¶∂‡¶æ‡¶Æ‡ßÅ‡¶ï ‡¶ù‡¶ø‡¶®‡ßÅ‡¶ï)",
            "Assorted Fresh Vegetables & Fruits (‡¶®‡¶æ‡¶®‡¶æ‡¶® ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶∂‡¶æ‡¶ï‡¶∏‡¶¨‡¶ú‡¶ø ‡¶ì ‡¶´‡¶≤)"
        ];

        // --- 2. DYNAMIC CATEGORIES ---
        const rotationCategories = [
            "A Famous Bollywood Celebrity Couple in a Romantic or Iconic Pose",
            "Two Famous World Politicians in a meeting or handshake (Dual Sculpture)",
            "A Deeply Emotional Human Scene (e.g. Mother & Child, Old Age, Prayer, Farmer)",
            "A Famous Cartoon Character or Duo in an action pose",
            "A Famous Superhero (Marvel/DC) in a power pose",
            "A World Famous Sports Player (Cricket/Football) in action"
        ];

        let catIndex = 0;
        let materialIndex = 0;

        // --- 1. SURPRISE ME (REAL-TIME) ---
        async function fetchIdea() {
            const btn = document.getElementById('btn-idea');
            const input = document.getElementById('main-input');
            const iconHtml = btn.querySelector('svg').outerHTML;
            
            const categoryDescription = rotationCategories[catIndex];
            const material = specificMaterials[materialIndex];

            catIndex = (catIndex + 1) % rotationCategories.length;
            materialIndex = (materialIndex + 1) % specificMaterials.length;

            btn.innerHTML = `<div class="spinner"></div> Thinking...`;
            input.style.opacity = "0.5";

            const prompt = `
            Generate a creative sculpture idea.
            Category: ${categoryDescription}.
            Material: ${material}.
            Instructions:
            1. Select SPECIFIC Famous Character(s).
            2. Describe them in an iconic pose.
            3. Strict Output Format: "[Subject Name(s)] sculpture crafted from [Material] in [Pose]."
            4. Do NOT mention the craftsman yet.
            5. Output English sentence only.
            `;

            try {
                const seed = Math.floor(Math.random() * 9999999);
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(prompt)}?seed=${seed}`);
                const text = await res.text();
                input.value = text.trim();
            } catch (e) {
                input.value = "Error fetching idea.";
            } finally {
                btn.innerHTML = `${iconHtml} Surprise Me (Rotate)`;
                input.style.opacity = "1";
            }
        }

        // --- 2. GENERATE MASTER PROMPT (CLEAN OUTPUT FIX & ANATOMY LOGIC) ---
        async function generateMaster() {
            const inputVal = document.getElementById('main-input').value.trim();
            const btn = document.getElementById('btn-master');
            const partSection = document.getElementById('part-section');

            if(!inputVal) return alert("Please enter a concept!");

            btn.disabled = true;
            btn.innerHTML = `<div class="spinner"></div> WEAVING & TRANSLATING...`;
            partSection.style.display = 'none';

            try {
                const systemPrompt = `
                ROLE: Expert Art Director. INPUT: "${inputVal}"
                
                TASK: Write a highly detailed 4-paragraph description focusing on HOW it is crafted.
                
                1. **TRANSLATE**: If input is Bangla/Other, translate to English first.
                
                2. **GENERATE SECTIONS**:
                   **SCULPTURE**: 
                   - MUST be "LIFE-SIZED" and "EQUAL HEIGHT TO CRAFTSMAN".
                   - **CRITICAL ANATOMY & GENDER LOGIC:**
                     - **NO REAL PARTS:** Eyes, skin, clothes must be 100% crafted from material loops/weaves/knots.
                     - **FACIAL HAIR RULES:** - Female Subjects (e.g. Kajol, Deepika): **NO BEARD.** Smooth woven texture for skin.
                       - Clean-shaven Males (e.g. Joe Biden, Obama): **NO BEARD.**
                       - Bearded Males (e.g. Modi, Tagore): Beard MUST be present but crafted from fibrous roots/strands.
                   - **EXTREME CRAFT DETAIL:** Describe *how* the material forms the features.
                   
                   **CRAFTSMAN (STRICTLY SOLO REAL HUMAN)**: 
                   - A REAL, LIVING Elderly Bangladeshi man. Long White Beard, Long White Hair. Humble attire. ALONE.
                   
                   **ENVIRONMENT (LOGIC BASED)**: 
                   - IF Material is Coconut -> Coconut Garden. Bamboo -> Bamboo Forest. Vegetables -> Vegetable Garden. Shells -> Riverbank. ELSE -> Rural Courtyard.
                   - Include scattered debris & tools.
                   
                   **TECH**: 8K, Ultra-realistic, 9:16 aspect ratio, Bright Natural Daylight.
                
                OUTPUT FORMAT: Plain text with headers. NO JSON. NO DEBUGGING TEXT.
                `;

                const seed = Math.floor(Math.random() * 999999);
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(systemPrompt)}?seed=${seed}&model=openai`);
                let fullText = await res.text();
                
                // *** CLEANING FUNCTION TO REMOVE JSON/DEBUG GARBAGE ***
                fullText = fullText.replace(/\{"role":.*?\}/g, "").trim(); 
                fullText = fullText.replace(/```json/g, "").replace(/```/g, "").trim();
                // Also remove any leading text before **SCULPTURE** if present
                const startIndex = fullText.indexOf("**SCULPTURE");
                if (startIndex > -1) {
                    fullText = fullText.substring(startIndex);
                }

                currentMasterPrompt = fullText; 

                createCard("MASTERPIECE PROMPT", fullText, "", "master");
                
                partSection.style.display = 'block';
                document.getElementById('parts-input').focus();

            } catch (e) {
                console.error(e);
                alert("AI Error. Please try again.");
            } finally {
                btn.innerHTML = `<svg class="icon" viewBox="0 0 24 24"><path d="M2 20h20v2H2v-2zm2-3h2v2H4v-2zm0-5h2v4H4v-4zm0-5h2v4H4V7zm0-5h2v4H4V2zm4 0h14v16H8V2zm2 2v12h10V4H10z"/></svg> ASSEMBLE MASTERPIECE`;
                btn.disabled = false;
            }
        }

        // --- 3. PROCESS PARTS (BATCH LOOP WITH DELAY) ---
        async function processParts() {
            const inputParts = document.getElementById('parts-input').value;
            const btn = document.getElementById('btn-parts');

            if(!inputParts.trim()) return alert("Enter parts first!");

            // Split by comma
            const partsArray = inputParts.split(',').map(p => p.trim()).filter(p => p);
            
            if(partsArray.length === 0) return;

            btn.disabled = true;
            const total = partsArray.length;

            // LOOP through each part sequentially
            for (let i = 0; i < total; i++) {
                btn.innerHTML = `<div class="spinner"></div> PROCESSING PART ${i+1} OF ${total}...`;
                
                const isFinalAssemblyStep = (i === total - 1);
                
                await generateSinglePart(partsArray[i], isFinalAssemblyStep);
                
                // Add a 1.5-second delay to ensure API stability
                if (i < total - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }

            btn.innerHTML = `<svg class="icon" viewBox="0 0 24 24"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/></svg> GENERATE ALL PARTS & VIDEO`;
            btn.disabled = false;
        }

        // --- 4. GENERATE SINGLE PART (STRICT LOGIC & CLEANING) ---
        async function generateSinglePart(partNameInput, isFinalAssemblyStep) {
            
            const imgTemplateStart = "A detailed photograph based on image_0.png, showing the elderly craftsman sitting on a woven mat. He is actively weaving the ";
            
            const sysPrompt = `
            ROLE: Image Describer & Translator.
            CONTEXT: ${currentMasterPrompt}
            INPUT PART: "${partNameInput}"
            IS_FINAL_ASSEMBLY_STEP: ${isFinalAssemblyStep}
            
            TASK: 
            1. Translate input part to English.
            
            2. **APPLY STRICT LOGIC (CRITICAL)**: 
               - **CASE A: CREATION (Not last item)** -> Craftsman is making an isolated part. **MAIN SCULPTURE IS NOT VISIBLE**.
               - **CASE B: ASSEMBLY (Last item)** -> Craftsman is ATTACHING this part to the main sculpture.
                  - **IMPORTANT FOR ASSEMBLY:** If the main sculpture has multiple characters (e.g. Modi & Biden), **ALL characters must be visible and complete, EXCEPT for the specific body part mentioned in the input** (e.g. Modi's head). That specific part is in the craftsman's hands being attached.
            
            3. **DETERMINE SUPPORT (For Creation):** Bamboo/Wood->pole; Leaves->stick frame; Heavy->stool. NO FLOATING.
            
            4. **GENERATE IMAGE PROMPT**:
               - **Creation:** "${imgTemplateStart} [PART NAME] of the [SUBJECT] figure using [MATERIAL]. The isolated [PART NAME] is securely MOUNTED ON [SUPPORT] in front of him. The background is a blurry [ENVIRONMENT] with NO other sculpture visible. Loose [MATERIAL] strips scattered."
               - **Assembly:** "A detailed photograph based on image_0.png, showing the REAL elderly craftsman standing next to the life-sized sculpture. The sculpture shows all figures, but the [PART NAME] is currently missing from the body. The craftsman is holding the completed [PART NAME] in his hands, carefully ATTACHING it to the connection point. The background is the [ENVIRONMENT]."
            
            5. **GENERATE VIDEO PROMPT**:
               - **Creation:** "Cinematic close-up of the elderly craftsman's hands actively weaving [MATERIAL] to form the [PART NAME]. Focus on dexterity and material texture."
               - **Assembly:** "Cinematic mid-shot of the elderly craftsman lifting and physically ATTACHING the [PART NAME] onto the main sculpture. He adjusts the connection with care."
            
            OUTPUT JSON:
            {
                "translated_part": "Head",
                "image_prompt": "...",
                "video_prompt": "..."
            }
            `;

            try {
                const seed = Math.floor(Math.random() * 99999);
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(sysPrompt)}?seed=${seed}&json=true&model=openai`);
                let raw = await res.text();
                // Clean JSON Response (Fixing the bug)
                raw = raw.replace(/```json/g, '').replace(/```/g, '');
                const jsonMatch = raw.match(/\{[\s\S]*\}/);
                if(jsonMatch) raw = jsonMatch[0];
                
                const data = JSON.parse(raw);

                const finalImgPrompt = `${data.image_prompt} --ar 9:16 --v 6.0 --style raw`;
                const finalVidPrompt = `${data.video_prompt} --ar 9:16 --v 6.0`;
                
                createCard(`PART: ${data.translated_part.toUpperCase()}`, finalImgPrompt, finalVidPrompt, "step");

            } catch (e) {
                console.error(e);
                createCard(`ERROR: ${partNameInput}`, "API Limit or Error. Try again.", "Error", "part");
            }
        }

        // --- HELPER: UI CARD ---
        function createCard(title, imgText, vidText, type) {
            const feed = document.getElementById('results-feed');
            const div = document.createElement('div');
            div.className = "result-card";
            
            const badgeClass = type === 'master' ? 'tag-master' : 'tag-part';
            
            let contentHtml = '';
            if (type === 'master') {
                contentHtml = `
                    <div class="prompt-block">
                        <span class="prompt-text">${imgText}</span>
                    </div>
                `;
            } else {
                contentHtml = `
                    <div class="prompt-block">
                        <span class="prompt-label">üñºÔ∏è IMAGE PROMPT</span>
                        <div class="prompt-text">${imgText}</div>
                        <div style="text-align:right; margin-top:5px;">
                            <button class="btn-copy" onclick="copyText(this, '${imgText.replace(/'/g, "\\'")}')">COPY IMAGE</button>
                        </div>
                    </div>
                    <div class="prompt-block" style="border-color: #ec4899;">
                        <span class="prompt-label video-label">üé• VIDEO PROMPT</span>
                        <div class="prompt-text">${vidText}</div>
                        <div style="text-align:right; margin-top:5px;">
                            <button class="btn-copy" onclick="copyText(this, '${vidText.replace(/'/g, "\\'")}')">COPY VIDEO</button>
                        </div>
                    </div>
                `;
            }
            
            div.innerHTML = `
                <div class="card-header">
                    <span class="tag ${badgeClass}">${title}</span>
                    ${type === 'master' ? `<button class="btn-copy" onclick="copyText(this, \`${imgText}\`)">COPY MASTER</button>` : ''}
                </div>
                <div class="content-area">
                    ${contentHtml}
                </div>
            `;
            feed.prepend(div);
        }

        function copyText(btn, text) {
            navigator.clipboard.writeText(text);
            const original = btn.innerText;
            btn.innerText = "COPIED!";
            setTimeout(() => btn.innerText = original, 2000);
        }
    </script>
</body>
</html>
