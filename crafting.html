<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Craft: Material Anatomy Fixed</title>
    <style>
        :root {
            --bg-deep: #050505;
            --glass-bg: rgba(40, 40, 45, 0.7);
            --glass-border: rgba(255, 255, 255, 0.15);
            --grad-magic: linear-gradient(135deg, #d946ef, #8b5cf6);
            --grad-gen: linear-gradient(135deg, #06b6d4, #3b82f6);
        }

        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: #000;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(217, 70, 239, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(6, 182, 212, 0.15) 0%, transparent 50%);
            color: #fff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
        }

        .app-container {
            width: 100%;
            max-width: 700px;
            display: flex;
            flex-direction: column;
            gap: 30px;
            z-index: 2;
        }

        /* GLASS PANEL */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 2px solid var(--glass-border);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.9), inset 0 2px 2px rgba(255,255,255,0.1);
        }

        header { text-align: center; margin-bottom: 25px; }
        
        h1 {
            margin: 0;
            font-size: 2.5rem;
            background: linear-gradient(to right, #fff, #a5f3fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            filter: drop-shadow(0 0 10px rgba(6, 182, 212, 0.3));
        }

        .subtitle {
            font-size: 0.8rem;
            letter-spacing: 4px;
            color: rgba(255,255,255,0.7);
            margin-top: 8px;
            text-transform: uppercase;
        }

        .dev-badge {
            background: rgba(255,255,255,0.08);
            border: 1px solid #22d3ee;
            color: #22d3ee;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.7rem;
            display: inline-block;
            margin-top: 15px;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(34, 211, 238, 0.2);
        }

        .input-group { display: flex; flex-direction: column; gap: 18px; }
        .top-row { display: flex; justify-content: flex-end; margin-bottom: -5px; }

        /* BUTTONS */
        .btn-3d-main {
            border: none;
            color: white;
            border-radius: 16px;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.15s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            letter-spacing: 1px;
        }
        .btn-3d-main:hover { filter: brightness(1.15); transform: translateY(-2px); }
        .btn-3d-main:active { transform: translateY(4px) !important; box-shadow: none !important; }
        .svg-icon-main { width: 20px; height: 20px; fill: currentColor; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3)); }

        .btn-magic {
            background: var(--grad-magic);
            padding: 10px 20px;
            font-size: 0.8rem;
            box-shadow: 0 6px 0 #7c3aed, 0 12px 20px rgba(217, 70, 239, 0.3);
        }

        textarea {
            background: rgba(0,0,0,0.5);
            border: none;
            border-radius: 20px;
            padding: 20px;
            color: #fff;
            font-size: 1.1rem;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            resize: vertical;
            transition: 0.3s;
            box-shadow: inset 0 8px 15px rgba(0,0,0,0.9);
        }
        textarea:focus { outline: none; box-shadow: inset 0 8px 15px rgba(0,0,0,1), 0 0 0 3px #06b6d4; }

        .btn-generate {
            background: var(--grad-gen);
            padding: 18px;
            font-size: 1.2rem;
            width: 100%;
            box-shadow: 0 8px 0 #0e5e9e, 0 15px 30px rgba(59, 130, 246, 0.3);
        }

        /* WORKBENCH */
        #workbench {
            display: none;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px dashed rgba(255,255,255,0.15);
            animation: slideDown 0.4s ease;
        }

        .workbench-title {
            color: #fbbf24;
            font-size: 0.9rem;
            font-weight: 900;
            margin-bottom: 18px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 10px;
            letter-spacing: 1px;
        }

        .parts-grid { display: flex; flex-wrap: wrap; gap: 12px; }

        .btn-part {
            border: none;
            color: white;
            padding: 12px 18px;
            border-radius: 14px;
            font-size: 0.8rem;
            font-weight: 800;
            cursor: pointer;
            transition: 0.2s;
            text-transform: uppercase;
            box-shadow: 0 5px 0 rgba(0,0,0,0.4), 0 8px 15px rgba(0,0,0,0.2);
            flex-grow: 1;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; 
            text-shadow: 0 1px 1px rgba(0,0,0,0.3);
        }
        .btn-part:active { transform: translateY(5px); box-shadow: none !important; }
        .btn-part:hover { filter: brightness(1.2); transform: translateY(-2px); }
        .svg-icon-part { width: 18px; height: 18px; fill: currentColor; opacity: 0.95; }

        /* RESULTS */
        #results-feed { display: flex; flex-direction: column; gap: 25px; }

        .result-card {
            background: #121212;
            border-radius: 24px;
            overflow: hidden;
            animation: slideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 20px 40px rgba(0,0,0,0.7);
            border: 1px solid #333;
        }

        .card-header {
            background: rgba(255,255,255,0.04);
            padding: 18px 22px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #222;
        }

        .tag {
            font-size: 0.75rem;
            font-weight: 900;
            padding: 6px 12px;
            border-radius: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .tag.master { background: linear-gradient(135deg, #10b981, #059669); color: white; }
        .tag.step { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }

        .prompt-box {
            background: #080808;
            padding: 25px;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            color: #e0e0e0;
            white-space: pre-wrap;
            line-height: 1.7;
            border-bottom: 1px solid #222;
        }

        .btn-copy {
            background: #222; color: #fff; border: 2px solid #444; padding: 6px 14px; border-radius: 50px; cursor: pointer; font-size: 0.7rem; font-weight: bold; transition: 0.2s;
        }
        .btn-copy:hover { background: #fff; color: #000; border-color: #fff;}
        .btn-copy:active { transform: scale(0.95); }

        @keyframes slideDown { from { opacity: 0; transform: translateY(-15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        .spinner { width: 16px; height: 16px; border: 3px solid rgba(255,255,255,0.3); border-top-color: #fff; border-radius: 50%; animation: spin 0.8s linear infinite; display: inline-block; vertical-align: middle; margin-right: 8px;}
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="glass-panel">
            <header>
                <h1>Master Craft Pro</h1>
                <div class="subtitle">MATERIAL ANATOMY EDITION</div>
                <div class="dev-badge">Developed by OLIULLAH SHIKDER JEWEL</div>
            </header>

            <div class="input-group">
                <div class="top-row">
                    <button class="btn-3d-main btn-magic" onclick="fetchIdea()" id="btn-idea">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="svg-icon-main">
                          <path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5zm8.25-3.75a.75.75 0 01.75.75v2.25h2.25a.75.75 0 010 1.5h-2.25v2.25a.75.75 0 01-1.5 0v-2.25H7.5a.75.75 0 010-1.5h2.25V7.5a.75.75 0 01.75-.75z" clip-rule="evenodd" />
                        </svg>
                        Surprise Me (Auto-Rotate)
                    </button>
                </div>

                <textarea id="user-input" placeholder="e.g., শাহরুখ Khan holding a gun, standing with Aishwarya Rai..."></textarea>
                
                <button class="btn-3d-main btn-generate" onclick="generateMaster()" id="btn-gen">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="svg-icon-main">
                      <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 00-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 01-.189-.866c0-.298.059-.605.189-.866zm2.023 6.828a.75.75 0 10-1.06-1.06 3.75 3.75 0 01-5.304 0 .75.75 0 00-1.06 1.06 5.25 5.25 0 007.424 0z" clip-rule="evenodd" />
                    </svg>
                    GENERATE DETAILED PROMPT
                </button>
            </div>

            <div id="workbench">
                <div class="workbench-title">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="svg-icon-main" style="color: #fbbf24;">
                      <path fill-rule="evenodd" d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" clip-rule="evenodd" />
                    </svg>
                    <span>Part Editing (Analyzed from Result)</span>
                </div>
                <div class="parts-grid" id="parts-list"></div>
            </div>
        </div>

        <div id="results-feed"></div>
    </div>

    <script>
        let projectState = { subject: "", material: "", masterPrompt: "" };

        // ** 1. STRICT 5 MATERIALS **
        const specificMaterials = [
            "Green Coconut Leaf Weaving (সবুজ নারিকেল পাতার বুনন)",
            "Green Bamboo Strips Fine Weaving (কাঁচা বাঁশের সবুজ ফালি)",
            "Living Green Vines (জীবন্ত সবুজ লতাপাতা/ভাইন)",
            "Colorful Wildflowers (নানান রঙের বুনো ফুল)",
            "Green Palm Leaf Weaving (পাম গাছের পাতার সূক্ষ্ম বুনন)"
        ];

        // ** 2. CATEGORIZED SUBJECTS **
        const categorizedSubjects = [
            {
                name: "Bollywood",
                items: [
                    "Shah Rukh Khan in his signature open-arms pose",
                    "Salman Khan adjusting his bracelet with swag",
                    "Amitabh Bachchan in classic angry young man pose",
                    "Deepika Padukone in a graceful dance pose",
                    "Aishwarya Rai in a royal traditional look",
                    "Hrithik Roshan doing a dance step"
                ]
            },
            {
                name: "Politician",
                items: [
                    "Narendra Modi giving a speech with hand raised",
                    "Donald Trump showing a thumbs up sign",
                    "Sheikh Hasina waving to the crowd",
                    "Barack Obama smiling and waving"
                ]
            },
            {
                name: "Cartoon",
                items: [
                    "Tom and Jerry chasing each other playfully",
                    "Doraemon standing with a big smile",
                    "Mickey Mouse waving hello",
                    "Batman in a brooding stance",
                    "Spiderman hanging upside down from a web"
                ]
            },
            {
                name: "Superhero",
                items: [
                    "Superman flying upwards with fist raised",
                    "Iron Man ready to blast",
                    "Captain America holding his shield"
                ]
            },
            {
                name: "Emotional",
                items: [
                    "A mother hugging her child with deep love",
                    "An elderly farmer wiping sweat from forehead",
                    "Two hands held together in prayer",
                    "A poor child sitting with a hopeful look"
                ]
            },
            {
                name: "Player",
                items: [
                    "Lionel Messi dribbling a football",
                    "Cristiano Ronaldo doing his Siuu celebration",
                    "Sakib Al Hasan bowling a cricket ball",
                    "Virat Kohli raising his bat after a century"
                ]
            }
        ];

        let currentCategoryIndex = 0;

        const buttonColors = [
            "linear-gradient(135deg, #ef4444, #b91c1c)", "linear-gradient(135deg, #f97316, #c2410c)", 
            "linear-gradient(135deg, #eab308, #a16207)", "linear-gradient(135deg, #22c55e, #15803d)", 
            "linear-gradient(135deg, #06b6d4, #0e7490)", "linear-gradient(135deg, #3b82f6, #1d4ed8)", 
            "linear-gradient(135deg, #a855f7, #7e22ce)", "linear-gradient(135deg, #ec4899, #be185d)"  
        ];

        // --- 1. SURPRISE ME (ROTATIONAL LOGIC) ---
        async function fetchIdea() {
            const btn = document.getElementById('btn-idea');
            const input = document.getElementById('user-input');
            const iconHtml = btn.querySelector('svg').outerHTML;
            
            const currentCategory = categorizedSubjects[currentCategoryIndex];
            const randomSubject = currentCategory.items[Math.floor(Math.random() * currentCategory.items.length)];
            const randomMaterial = specificMaterials[Math.floor(Math.random() * specificMaterials.length)];

            btn.innerHTML = `${iconHtml} <div class="spinner"></div> Getting ${currentCategory.name}...`;
            input.style.opacity = "0.5";

            currentCategoryIndex = (currentCategoryIndex + 1) % categorizedSubjects.length;

            const prompt = `Create a single sentence describing a Life-Sized Sculpture.
            Subject: ${randomSubject}.
            Material: ${randomMaterial}.
            Constraint: Do NOT mention the craftsman yet.
            Output: English sentence only.`;
            
            try {
                const seed = Math.floor(Math.random() * 99999);
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(prompt)}?seed=${seed}`);
                const text = await res.text();
                input.value = text.trim();
            } catch (e) {
                input.value = "Error fetching idea.";
            } finally {
                btn.innerHTML = `${iconHtml} Surprise Me (Rotate)`;
                input.style.opacity = "1";
            }
        }

        // --- 2. MASTER GENERATION (STRICT MATERIAL ANATOMY) ---
        async function generateMaster() {
            const inputVal = document.getElementById('user-input').value.trim();
            const btn = document.getElementById('btn-gen');
            const workbench = document.getElementById('workbench');
            const iconHtml = btn.querySelector('svg').outerHTML;

            if(!inputVal) return alert("Please enter a concept!");

            btn.innerHTML = `${iconHtml} <div class="spinner"></div> ASSEMBLING...`;
            btn.disabled = true;
            workbench.style.display = 'none';

            try {
                // *** UPDATED SYSTEM PROMPT: MATERIAL ANATOMY ***
                const systemPrompt = `
                ROLE: Expert Art Director. INPUT: "${inputVal}"
                
                TASK: Generate components for a Master Craft image.
                
                REQUIREMENTS:
                1. **sculpture_desc**: Describe the sculpture in detail. MUST be LIFE-SIZED. MUST include ALL characters mentioned.
                   - **STRICT MATERIAL ANATOMY:** The subject's face (eyes, nose, lips), hair, skin, and clothing must be described as **100% CRAFTED** from the specific material. **NO real skin, NO real fabric.** Explicitly describe how the material (leaves/bamboo/vines) is woven/knotted/layered to form facial features, hair strands, and fabric textures.
                2. **craftsman_desc**: Describe an Elderly Bangladeshi man standing beside the work.
                3. **env_desc**: Rural courtyard ground, specific debris (shavings/leaves) & tools scattered on floor.
                4. **parts**: List 5-7 PHYSICAL parts found in YOUR description above (e.g., Head, Arm, Gun, Base).
                
                OUTPUT RAW JSON ONLY:
                {
                    "sculpture_desc": "...",
                    "craftsman_desc": "...",
                    "env_desc": "...",
                    "parts": ["Part1", "Part2", "Part3", "Part4"],
                    "subject": "Short Name",
                    "material": "Material Name"
                }
                `;

                const seed = Math.floor(Math.random() * 999999);
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(systemPrompt)}?seed=${seed}&json=true&model=openai`);
                let raw = await res.text();
                raw = raw.replace(/```json/g, '').replace(/```/g, '');
                const jsonMatch = raw.match(/\{[\s\S]*\}/);
                if (jsonMatch) { raw = jsonMatch[0]; } else { throw new Error("Invalid JSON"); }
                
                const data = JSON.parse(raw);
                projectState = data;

                // *** HARDCODED ASSEMBLY ***
                const assembledPrompt = `
**SCULPTURE:** A LIFE-SIZED ${data.sculpture_desc} The sculpture stands EQUAL IN HEIGHT to the craftsman beside it.

**CRAFTSMAN:** ${data.craftsman_desc} He is standing right next to the sculpture, touching it or adjusting it.

**ENVIRONMENT:** ${data.env_desc}

**TECH:** 8K, Ultra-realistic, 9:16 aspect ratio, Bright Natural Daylight.
                `.trim();

                projectState.masterPrompt = assembledPrompt; 

                createCard("MASTERPIECE", assembledPrompt, "master");
                renderWorkbench(data.parts);

            } catch (e) {
                console.error(e);
                alert("AI Error. Try Again.");
            } finally {
                btn.innerHTML = `${iconHtml} GENERATE DETAILED PROMPT`;
                btn.disabled = false;
            }
        }

        // --- 3. REVERSE STEP GENERATION ---
        async function generateStep(partName, btnElement) {
            const originalHtml = btnElement.innerHTML;
            btnElement.innerHTML = `${btnElement.querySelector('svg').outerHTML} <div class="spinner"></div>`;
            
            try {
                const requiredPhrase = "This image is being reverse-unwrapped from the final sculpture using a guided editing process. The original base image being edited is the first final sculpture image.";

                const stepSystemPrompt = `
                ROLE: Reverse-Unwrapping Engine.
                CONTEXT: ${projectState.masterPrompt}
                TARGET PART: ${partName}
                
                MANDATORY RULES:
                1. **LOCATION LOCK:** Background MUST match the ENVIRONMENT description provided. Craftsman has NOT moved.
                2. **REVERSE LOGIC:** Main sculpture is visible but MISSING the ${partName}.
                3. **WORKBENCH:** The ${partName} is now on a bamboo tool-bench/mat being woven by the craftsman.
                4. **LIGHTING:** Bright Daylight.
                
                OUTPUT: Visual description ONLY (No intro phrase).
                `;

                const seed = Math.floor(Math.random() * 999999);
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(stepSystemPrompt)}?seed=${seed}&model=openai`);
                let aiBody = await res.text();
                aiBody = aiBody.replace(/"/g, '').trim();
                
                const finalPrompt = `${requiredPhrase} ${aiBody} --ar 9:16 --v 6.0 --style raw`;
                createCard(`EDITING: ${partName.toUpperCase()}`, finalPrompt, "step");

            } catch (e) {
                alert("Error generating step.");
            } finally {
                btnElement.innerHTML = originalHtml;
            }
        }

        // --- HELPER: ICONS ---
        function getIconSVG(part) {
            const p = part.toLowerCase();
            const svgStart = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="svg-icon-part">';
            const svgEnd = '</svg>';
            
            const paths = {
                head: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z', 
                body: 'M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z', 
                hand: 'M21 9c0-.55-.45-1-1-1h-1c-.55 0-1 .45-1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V5c0-.55-.45-1-1-1s-1 .45-1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V3c0-.55-.45-1-1-1s-1 .45-1 1v8c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55-.45-1-1-1h-1c-.55 0-1 .45-1 1v4.25c0 3.48 2.56 6.41 5.94 6.71C18.72 18.21 21 15.42 21 12V9z', 
                leg: 'M20,18c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1c0-0.6,0.4-1,1-1c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1c-0.6,0-1-0.4-1-1c0-0.6,0.4-1-1c0.6,0,1-0.4,1-1c0,0.6-0.4-1-1-1c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1c0.6,0,1,0.4,1,1c0,0.6-0.4-1-1,1c-0.6,0-1,0.4-1,1c0,0.6,0.4,1,1,1C20.4,18,20,18,20,18z', 
                base: 'M3 22H21V20H3V22ZM5 18H19V16H5V18ZM7 14H17V12H7V14ZM9 10H15V2H9V10Z', 
                wing: 'M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 1.58.37 3.07 1.03 4.41C4.4 12.89 7.82 10.24 12 10.24s7.6 2.65 8.97 6.17c.66-1.34 1.03-2.83 1.03-4.41z', 
                tail: 'M19.902 4.098a3.75 3.75 0 00-5.304 0l-4.5 4.5a3.75 3.75 0 000 5.304l3 3a3.75 3.75 0 005.304-5.304l-4.5-4.5a3.75 3.75 0 00-5.304 0L3.152 12.548a3.75 3.75 0 005.304 5.304l1.5-1.5a.75.75 0 011.06 1.06l-1.5 1.5a5.25 5.25 0 01-7.424-7.424l5.448-5.448a5.25 5.25 0 017.424 0l4.5 4.5a5.25 5.25 0 010 7.424l-3 3a5.25 5.25 0 01-7.424 0 .75.75 0 10-1.06 1.06 6.75 6.75 0 009.546 0l3-3a6.75 6.75 0 000-9.546l-4.5-4.5a6.75 6.75 0 00-9.546 0L2.09 8.838a6.75 6.75 0 009.546 9.546l1.5-1.5a.75.75 0 011.06 1.06l-1.5 1.5a8.25 8.25 0 01-11.667-11.667l5.448-5.448a8.25 8.25 0 0111.667 0l4.5 4.5a8.25 8.25 0 010 11.667l-3 3a8.25 8.25 0 01-11.667 0 .75.75 0 10-1.06 1.06 9.75 9.75 0 0013.788 0l3-3a9.75 9.75 0 000-13.788l-4.5-4.5a9.75 9.75 0 00-13.788 0L.53 10.95a9.75 9.75 0 0013.788 13.788l1.5-1.5a.75.75 0 111.06 1.06l-1.5 1.5a11.25 11.25 0 11-15.91-15.91l5.448-5.448a11.25 11.25 0 1115.91 15.91l-3 3a11.25 11.25 0 11-15.91-15.91l4.5-4.5a11.25 11.25 0 0115.91 0z', 
                tool: 'M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z', 
                craft: 'M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z', 
                default: 'M13 13v8h-2v-8H3v-2h8V3h2v8h8v2h-8z' 
            };

            let path = paths.default;
            if(p.includes('head') || p.includes('face') || p.includes('hair')) path = paths.head;
            else if(p.includes('hand') || p.includes('arm') || p.includes('finger')) path = paths.hand;
            else if(p.includes('leg') || p.includes('foot')) path = paths.leg;
            else if(p.includes('body') || p.includes('chest') || p.includes('torso') || p.includes('saree') || p.includes('shirt')) path = paths.body;
            else if(p.includes('base') || p.includes('stand')) path = paths.base;
            else if(p.includes('wing')) path = paths.wing;
            else if(p.includes('tail')) path = paths.tail;
            else if(p.includes('tool') || p.includes('weapon') || p.includes('gun') || p.includes('sword') || p.includes('basket')) path = paths.tool;
            else if(p.includes('weave') || p.includes('knit')) path = paths.craft;

            return svgStart + path + svgEnd;
        }

        function renderWorkbench(parts) {
            const list = document.getElementById('parts-list');
            const bench = document.getElementById('workbench');
            list.innerHTML = "";

            parts.forEach((part, index) => {
                const btn = document.createElement('button');
                btn.className = 'btn-part';
                const svgIcon = getIconSVG(part);
                const colorBg = buttonColors[index % buttonColors.length];
                btn.style.background = colorBg;
                btn.style.boxShadow = `0 5px 0 rgba(0,0,0,0.3)`;
                btn.innerHTML = `${svgIcon} <span>${part}</span>`;
                btn.onclick = function() { generateStep(part, this); };
                list.appendChild(btn);
            });
            bench.style.display = 'block';
        }

        function createCard(type, text, mode) {
            const feed = document.getElementById('results-feed');
            const card = document.createElement('div');
            card.className = `result-card`;
            const tagClass = mode === 'master' ? 'master' : 'step';
            card.innerHTML = `
                <div class="card-header">
                    <span class="tag ${tagClass}">${type}</span>
                    <button class="btn-copy" onclick="copyText(this)">COPY PROMPT</button>
                </div>
                <div class="prompt-box">${text}</div>
            `;
            feed.prepend(card);
        }

        function copyText(btn) {
            const text = btn.parentElement.nextElementSibling.innerText;
            navigator.clipboard.writeText(text);
            const old = btn.innerText;
            btn.innerText = "COPIED!";
            setTimeout(() => btn.innerText = "COPY PROMPT", 2000);
        }
    </script>
</body>
</html>
